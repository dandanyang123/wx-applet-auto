(function(t){function e(e){for(var r,n,o=e[0],i=e[1],c=e[2],p=0,f=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);u&&u(e);while(f.length)f.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],r=!0,o=1;o<a.length;o++){var i=a[o];0!==s[i]&&(r=!1)}r&&(l.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},s={app:0},l=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=i;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02fb":function(t,e,a){"use strict";a("4c49")},"4c49":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("7f7f"),a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),s=a("5c96"),l=a.n(s),n=(a("0fae"),a("c3da")),o=a.n(n),i=a("e8cc"),c=a.n(i),u=(a("b11c"),a("95a8"),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("el-container",[e("el-header",{staticStyle:{"min-height":"80px",height:"5vh"}},[e("h1",{staticStyle:{"text-align":"center"}},[t._v("minium 测试报告")])]),e("el-container",{staticStyle:{height:"80vh"}},[t.taskMenuShow?e("el-aside",{staticStyle:{"min-width":"400px","background-color":"rgb(238, 241, 246)"}},[e("el-menu",{staticStyle:{"min-height":"80vh"},attrs:{"default-active":t.defaultOpeneds[1],"default-openeds":t.defaultOpeneds,"unique-opened":!0},on:{select:t.handleSelect,open:t.handleOpen,close:t.handleClose}},t._l(t.taskDatas,(function(a,r){return e("el-submenu",{attrs:{index:r+""}},[e("template",{slot:"title"},[e("span",[t._v(t._s(a.summary.start_time))])]),t._l(a.case_datas,(function(a,s){return e("el-menu-item",{attrs:{index:r+"-"+s}},[e("el-row",{attrs:{gutter:10,type:"flex",justify:"space-between"}},[e("el-col",{staticStyle:{"word-wrap":"break-word","word-break":"break-all",overflow:"auto"},attrs:{span:18}},[t._v(t._s(a.case_name))]),e("el-col",{attrs:{span:4}},[e("el-tag",{attrs:{type:t.statusClass(a),effect:"dark"}},[t._v(t._s(t.statusMsg(a)))])],1)],1)],1)}))],2)})),1)],1):t._e(),e("el-container",{attrs:{direction:"vertical"}},[e("el-main",[e("el-container",[e("el-main",[e("Summary",{attrs:{summary:t.summary}})],1)],1),e("el-container",[t.taskMenuShow?t._e():e("el-aside",{attrs:{width:"500px"}},[e("el-col",[e("el-row",{staticStyle:{"padding-top":"2em"}},[e("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.caseDatas,"highlight-current-row":""},on:{"row-click":t.tableRowClick}},[e("el-table-column",{attrs:{prop:"run_time",label:"执行时间",width:"180"}}),e("el-table-column",{attrs:{prop:"case_name",label:"用例名称",width:"180"}}),e("el-table-column",{attrs:{prop:"case_name",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.statusClass(a.row),effect:"dark"}},[t._v(t._s(t.statusMsg(a.row)))])]}}],null,!1,1249338146)})],1)],1)],1)],1),e("el-main",[t.caseDetail?e("CaseDetail",{attrs:{caseDetail:t.caseDetail}}):t._e()],1)],1)],1)],1)],1),e("el-footer",{staticStyle:{"text-align":"center",height:"15vh","font-size":"12px",color:"#aaa"}},[e("p",[t._v("Minium Designed by 微信测试中心")]),e("p",[t._v("Copyright © 1998-2019 Tencent Inc. All Rights Reserved")])])],1),e("el-backtop",[e("div",{staticStyle:{"{\n      height":"100%",width:"100%","background-color":"#f2f5f6","box-shadow":"0 0 6px rgba(0,0,0, .12)","text-align":"center","line-height":"40px",color:"#1989fa"}},[t._v("\n    Top\n  ")])])],1)}),p=[],f=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("28a5"),a("768b")),d=function(){var t=this,e=t._self._c;return e("el-col",{staticClass:"case-detail"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-card",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:[t.caseDetail.device.system_info],stripe:"",border:""}},[e("el-table-column",{attrs:{label:"执行环境",align:"center"}},[e("el-table-column",{attrs:{prop:"model",label:"设备"}}),e("el-table-column",{attrs:{prop:"platform",label:"平台"}}),e("el-table-column",{attrs:{prop:"system",label:"系统"}}),e("el-table-column",{attrs:{prop:"SDKVersion",label:"基础库"}})],1)],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:[t.caseDetail],stripe:"",border:""}},[e("el-table-column",{attrs:{label:"运行信息",align:"center"}},[e("el-table-column",{attrs:{prop:"module",label:"名称"}}),e("el-table-column",{attrs:{prop:"case_name",label:"包名"}}),e("el-table-column",{attrs:{prop:"costs",label:"耗时"}}),e("el-table-column",{attrs:{label:"结果"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.statusMsg(e.row))+"\n              ")]}}])})],1)],1)],1)],1),e("el-col",{staticStyle:{"margin-left":"1em"},attrs:{span:10}},[e("el-card",[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("用例说明")])]),e("pre",[t._v(t._s(t.caseDetail.case_doc))])])],1)],1),e("el-collapse",{attrs:{value:["performance"]}},[e("el-collapse-item",{attrs:{title:"运行截图",name:"capture"}},[t.caseDetail.screen_info&&t.caseDetail.screen_info.length>0?e("el-col",{staticStyle:{overflow:"auto"}},[e("el-row",{attrs:{type:"flex"}},t._l(t.caseDetail.screen_info,(function(a,r){return e("el-col",{key:r,attrs:{span:4}},[e("el-image",{staticStyle:{width:"95%"},attrs:{src:t.prefix+"/"+a.path,"preview-src-list":a.preview_src_list}}),e("div",{staticStyle:{padding:"14px"}},[e("span",[t._v(t._s(a.name))]),e("div",{staticClass:"bottom clearfix"},[e("time",{staticClass:"time"},[t._v(t._s(a.datetime))])])])],1)})),1)],1):e("el-col",[e("div",{staticStyle:{color:"#aaa","font-weight":"bold"}},[t._v("无截图")])])],1),e("el-collapse-item",{attrs:{title:"代码和堆栈",name:"code"}},[t.codeShow?e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("h3",[t._v("代码")]),t._l(t.caseDetail.source.code,(function(a,r){return e("div",{key:r},[t.caseDetail.failed_line_num===t.caseDetail.source.start+r?e("pre",{staticStyle:{color:"red"}},[t._v(t._s(a))]):e("pre",{attrs:{"data-lang":"Python"}},[e("code",[t._v(t._s(a))])])])}))],2),e("el-col",{attrs:{span:12}},[e("h3",[t._v("错误堆栈")]),t.caseDetail.errors||t.caseDetail.failures?e("div",[e("pre",{staticStyle:{color:"red"}},[t._v(t._s(t.caseDetail.errors||t.caseDetail.failures))])]):t._e()])],1):t._e()],1),e("el-collapse-item",{attrs:{title:"运行日志",name:"log"}},[e("div",{staticClass:"log-box"},t._l(t.logs,(function(a,r){return e("pre",{key:r,class:t.getLogClass(a)},[t._v(t._s(a))])})),0)]),e("el-collapse-item",{attrs:{title:"小程序日志",name:"weapp-log"}},[t.appLogs.length>0?e("div",{staticClass:"log-box"},t._l(t.appLogs,(function(a,r){return e("pre",{key:r,class:t.getLogClass(JSON.stringify(a))},[t._v(t._s("["+a.type+"] - "+JSON.stringify(a.args)+"\n\n"))])})),0):e("div",[e("div",{staticStyle:{color:"#aaa","font-weight":"bold"}},[t._v("无日志")])])]),t.caseDetail.performance||t.caseDetail.fps?e("el-collapse-item",{attrs:{title:"性能信息",name:"performance"}},[t.caseDetail.performance?e("ve-line",{attrs:{toolbox:t.toolbox,data:t.perfData,settings:t.chartSettings}}):t._e(),t.caseDetail.fps?e("ve-line",{attrs:{grid:t.grid,toolbox:t.toolbox,data:t.fpsData,"mark-line":t.markLine}}):t._e()],1):t._e()],1)],1)},m=[];a("6762"),a("2fdb"),a("ac6a"),a("456d");function h(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=b(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,s=function(){};return{s:s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,n=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){o=!0,l=t},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw l}}}}function b(t,e){if(t){if("string"===typeof t)return g(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var y=a("bc3a"),v=a("b9b9"),_={name:"CaseDetail",components:{VeLine:o.a},props:{caseDetail:Object},data:function(){return this.chartSettings={xAxisType:"time"},this.grid={right:"10%"},this.toolbox={feature:{magicType:{type:["line","bar"]},saveAsImage:{}}},this.markLine={data:[{name:"平均值",label:{formatter:"{b}: {c}"},type:"average"},{name:"最大值",label:{formatter:"{b}: {c}"},type:"max"},{name:"最小值",label:{formatter:"{b}: {c}"},type:"min"}]},{codeShow:!0,showLog:!1,logs:[],appLogs:[],perfData:{columns:["time","CPU","MEM"],rows:[]},fpsData:{columns:["second","帧数"],rows:[]}}},methods:{refresh:function(){var t=this,e={columns:["time","CPU","MEM"],rows:[]};if(this.caseDetail.performance){var a,r=h(this.caseDetail.performance);try{for(r.s();!(a=r.n()).done;){var s=a.value,l=Object.keys(s)[0];e.rows.push({time:v(new Date(1e3*parseFloat(l)),"yyyy/mm/dd HH:MM:ss"),CPU:s[l].cpu,MEM:s[l].mem})}}catch(i){r.e(i)}finally{r.f()}}this.perfData=e;var n={columns:["second","帧数"],rows:[]};if(this.caseDetail.fps)for(var o in this.caseDetail.fps.fpsvalue)n.rows.push({second:o,"帧数":this.caseDetail.fps.fpsvalue[o]});this.fpsData=n,y.get("".concat(this.prefix,"/").concat(this.caseDetail.log_filename)).then((function(e){t.logs=e.data.split("\n")})).catch((function(t){console.log(t)})),y.get("".concat(this.prefix,"/").concat(this.caseDetail.weapp_log_path)).then((function(e){t.appLogs=e.data.split("\n");for(var a=0;a<t.appLogs.length;a++)""!==t.appLogs[a]?t.appLogs[a]=JSON.parse(t.appLogs[a]):t.appLogs.pop(a)})).catch((function(t){console.log(t)}))},getLogClass:function(t){return console.log(t),t.includes("NATIV")||t.includes("DEBUG")||t.includes("METHO")||t.includes('"debug"')?"log-debug":t.includes("INFO")||t.includes('"log"')||t.includes('"info"')?"log-info":t.includes("WARN")||t.includes('"warn"')?"log-warning":"log-error"},statusMsg:function(t){return t.success?"成功":t.is_error?"异常":t.is_failure?"失败":void 0}},mounted:function(){this.refresh()},computed:{prefix:function(){return"".concat("").concat(this.caseDetail.relative)}},watch:{caseDetail:function(){this.refresh()}}},w=_,D=(a("02fb"),a("2877")),S=Object(D["a"])(w,d,m,!1,null,"015e70d9",null),k=S.exports,x=function(){var t=this,e=t._self._c;return e("el-container",[e("el-main",[e("el-row",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:[t.summary],stripe:"",border:""}},[e("el-table-column",{attrs:{prop:"case_num",label:"case数"}}),e("el-table-column",{attrs:{prop:"success",label:"通过"}}),e("el-table-column",{attrs:{prop:"failed",label:"失败"}}),e("el-table-column",{attrs:{prop:"error",label:"case异常"}}),e("el-table-column",{attrs:{label:"通过率"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-progress",{attrs:{"text-inside":!0,"stroke-width":22,percentage:t.getPercentage(a.row),status:t.getPercentage(a.row)>90?"success":t.getPercentage(a.row)>60?"warning":"exception"}})]}}])}),e("el-table-column",{attrs:{prop:"start_time",label:"开始时间"}}),e("el-table-column",{attrs:{prop:"end_time",label:"结束时间"}}),e("el-table-column",{attrs:{prop:"costs",label:"耗时"}})],1)],1),e("el-row",{staticStyle:{height:"20px"}}),e("el-row",[t.summary.detail&&t.summary.detail.length>1?e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.summary.detail,stripe:"",border:""}},[e("el-table-column",{attrs:{prop:"name",label:"套件"}}),e("el-table-column",{attrs:{prop:"case_num",label:"case数"}}),e("el-table-column",{attrs:{prop:"success",label:"通过"}}),e("el-table-column",{attrs:{prop:"failed",label:"失败"}}),e("el-table-column",{attrs:{prop:"error",label:"case异常"}}),e("el-table-column",{attrs:{label:"通过率"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-progress",{attrs:{"text-inside":!0,"stroke-width":22,percentage:t.getPercentage(a.row),status:t.getPercentage(a.row)>90?"success":t.getPercentage(a.row)>60?"warning":"exception"}})]}}],null,!1,1260354110)}),e("el-table-column",{attrs:{prop:"start_time",label:"开始时间"}}),e("el-table-column",{attrs:{prop:"end_time",label:"结束时间"}}),e("el-table-column",{attrs:{prop:"costs",label:"耗时"}})],1):t._e()],1)],1)],1)},O=[],C={name:"Summary",props:{summary:Object},data:function(){return{}},methods:{getPercentage:function(t){var e=t.success,a=t.case_num;return parseInt(100*e/a)}}},M=C,j=Object(D["a"])(M,x,O,!1,null,null,null),P=j.exports;function A(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=L(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,s=function(){};return{s:s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,n=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){o=!0,l=t},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw l}}}}function L(t,e){if(t){if("string"===typeof t)return T(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(t,e):void 0}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var I=a("bc3a"),E={name:"app",components:{CaseDetail:k,Summary:P},data:function(){return{metadata:null,caseDetail:0,taskDetail:null,taskMenuShow:!1,defaultOpeneds:["0","0-0"]}},mounted:function(){var t=this;I.get("".concat("","meta.json")).then((function(e){function a(t){var e,a=t.screen_info,r=[],s=A(a);try{for(s.s();!(e=s.n()).done;){var l=e.value;r.push(t.relative+"/"+l.path)}}catch(o){s.e(o)}finally{s.f()}t.preview_src_list=r;for(var n=0;n<a.length;n++)a[n].preview_src_list=r.slice(n).concat(r.slice(0,n))}switch(t.metadata=e.data,t.metadata.version||1){case 1:t.taskMenuShow=!1;var r,s=A(t.metadata.case_datas);try{for(s.s();!(r=s.n()).done;){var l=r.value;a(l)}}catch(f){s.e(f)}finally{s.f()}t.$refs.singleTable.setCurrentRow(t.caseDetail=t.metadata.case_datas[0]);break;case 2:t.metadata.task_datas.length<2?t.taskMenuShow=!1:t.taskMenuShow=!0;var n,o=A(t.metadata.task_datas);try{for(o.s();!(n=o.n()).done;){var i,c=n.value,u=A(c.case_datas);try{for(u.s();!(i=u.n()).done;){var p=i.value;a(p)}}catch(f){u.e(f)}finally{u.f()}}}catch(f){o.e(f)}finally{o.f()}t.taskDetail=t.metadata.task_datas[0],t.caseDetail=t.taskDetail&&t.taskDetail.case_datas[0];break}}))},methods:{handleOpen:function(t,e){console.log("@open",t,e),this.taskDetail=this.taskDatas[t],this.caseDetail=this.taskDetail.case_datas[0],this.defaultOpeneds=[t,t+"-0"]},handleClose:function(t,e){console.log("@close",t,e)},handleSelect:function(t,e){var a=t.split("-"),r=Object(f["a"])(a,2),s=r[0],l=r[1];console.log("@select",t,e,s,l),this.taskDetail=this.taskDatas[s],this.caseDetail=this.taskDetail.case_datas[l]},tableRowClassName:function(t){var e=t.row;t.index;return e.success?"success-row":e.failure?"warning-row":"error-row"},tableRowClick:function(t){console.log(t),this.caseDetail=t},statusClass:function(t){return t.success?"success":t.is_error?"danger":t.is_failure?"warning":void 0},statusMsg:function(t){return t.success?"成功":t.is_error?"异常":t.is_failure?"失败":void 0}},computed:{taskDatas:function(){return this.metadata?this.metadata.task_datas:[]},caseDatas:function(){return this.metadata?1===this.metadata.version?this.metadata.case_datas:this.metadata.task_datas[0]&&this.metadata.task_datas[0].case_datas:[]},summary:function(){return this.metadata?1===this.metadata.version?this.metadata.summary:this.taskDetail?this.taskDetail.summary:this.metadata.task_datas[0]?this.metadata.task_datas[0].summary:{}:{}}}},N=E,R=(a("be78"),Object(D["a"])(N,u,p,!1,null,null,null)),U=R.exports;r["default"].config.productionTip=!1,r["default"].use(l.a),r["default"].component(o.a.name,o.a),r["default"].component(c.a.name,c.a),new r["default"]({render:function(t){return t(U)}}).$mount("#app")},ae35:function(t,e,a){},be78:function(t,e,a){"use strict";a("ae35")}});
//# sourceMappingURL=app.544bedf4.js.map